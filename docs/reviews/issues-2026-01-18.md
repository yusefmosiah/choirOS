# Issues (Jan 18)

Status update: 2026-01-18

## Resolved
- [x] Auth gateway stub + session issuance with passkey-shaped endpoints. (`api/routers/auth.py`, `shared/auth.py`)
- [x] Phase 0 NATS hardening: per-user subject permissions + read-only web creds. (`config/nats.conf`, `config/tenancy.json`)
- [x] Sandbox runner interface wired into verifier runner. (`supervisor/sandbox_runner.py`, `supervisor/verifier_runner.py`)
- [x] Frontend Auth UI + session management. (`choiros/src/components/apps/Auth.tsx`)
- [x] VC-01 | Version control primitives: checkpoint(), diff_between(), git_revert() implemented in `supervisor/git_ops.py:204-354`. Spec: `docs/specs/CHOIR_STORAGE_ROLLBACK_SPEC.md`.
- [x] SBX-02 | sprites.dev adapter: full API wrapper with create/exec/checkpoint/restore/proxy in `supervisor/sprites_adapter.py`. Tests: `supervisor/tests/test_sprites_adapter.py`.
- [x] SBX-01 | Sandbox lifecycle: LocalSandboxRunner complete; SpritesSandboxRunner integrated via `sandbox_provider.py`. Network policy + resources dataclasses defined.
- [x] Sandbox lifecycle scaffolding: `sandbox_runner.py`, `sandbox_provider.py`, `sprites_adapter.py`, `sandbox_config.py` all implemented with test coverage.

## In Progress
- [~] FE-01 | Terminal UI implemented (`choiros/src/components/apps/Terminal.tsx`), but React frontend is NOT yet running inside inner sandbox.

## Open (Implementation Pending)
- [ ] QA-01 | High | Add screenshot snapshot testing with a "screenshot slideshow" verification artifact (stepwise images of feature operation). Moderate browser automation effort.
- [ ] AUTH-03 | High | Define passkey auth + recovery strategy (threat model, flows, data model), with a minimal "works now" implementation path. Spec drafted: `docs/specs/CHOIR_AUTH_RECOVERY_SPEC.md`.
- [ ] AUTH-04 | Medium | Email recovery channel integration (Resend) + verification flow (link/OTP), rate limiting, audit.
- [ ] AUTH-05 | Medium | WhatsApp + Telegram recovery channels: secure binding, opt-in, out-of-band verification, and cooldowns.
- [ ] SEC-01 | Medium | Security-by-design scope for chat app I/O + MCP server (capabilities, audit, isolation boundaries).
- [ ] MCP-01 | Low | MCP server adapter: capability-scoped API with audited tool access.
- [ ] IO-01 | Low | Chat app I/O shim: scoped command surface + secure identity binding.
- [ ] AUTH-01 | High | WebAuthn verification is stubbed; no cryptographic checks on attestation/assertion.
- [ ] NATS-01 | High | Credentials are static; rotate per session (short-lived creds).
- [ ] NATS-02 | Medium | Browser still connects to NATS directly; consider server-side fanout (SSE/WS) for stronger isolation.
- [ ] AUTH-02 | Medium | Enforce auth on supervisor HTTP endpoints (runs/work items) + per-user event store isolation.
- [ ] NATS-03 | Medium | Move to multi-account NATS for stronger tenant isolation (Phase 1).
- [ ] FE-01 | High | Host React frontend inside inner sandbox; enable supervisor-triggered rollback when bad code breaks the UI. (Partially done: Terminal UI exists, frontend-in-sandbox pending)

## Post-Bootstrap Backlog (from archived planning)
- [ ] WRITER-UX-01 | Medium | Improve Writer UX: run prompts from writer pane, not just bottom input.

### Phase 2: Real Terminal + Sandbox
- [ ] TERM-01 | High | Terminal controls inner VM (true sandbox terminal).
- [ ] TERM-02 | Medium | Container management UI.
- [ ] AWS-01 | Medium | AWS integration design (surface constraints + infra plan).

### Phase 3: Media Rich Controls
- [ ] MEDIA-01 | Medium | Audio player with controls.
- [ ] MEDIA-02 | Medium | Video player with controls.
- [ ] MEDIA-03 | Medium | Image viewer.
- [ ] MEDIA-04 | Medium | External embeds (YouTube, RSS/podcasts, arbitrary URLs).

### Phase 4: Filesystem Features
- [ ] FS-01 | Medium | Mindmap view of files.
- [ ] FS-02 | Medium | Live animation/replay of run context access (hierarchical mindmap with file/content leaf nodes).
- [ ] OS-01 | Medium | OS Connector: mount Choir as drive (Windows TBD, macOS File Provider/FUSE, Linux FUSE) â€” split into coordinator + platform subagents.
