# Handoff (Jan 18)

Status update: 2026-01-18

## Context
- Workspace: `/Users/wiz/conductor/workspaces/choirOS/monterrey`
- Target branch: `main`
- Current branch renamed to: `yusefmosiah/handoff-progress`

## What Changed Today
- Auth + recovery spec drafted: `docs/specs/CHOIR_AUTH_RECOVERY_SPEC.md`.
- Storage + rollback spec drafted: `docs/specs/CHOIR_STORAGE_ROLLBACK_SPEC.md`.
- Issue tracker expanded and ordered: `docs/reviews/issues-2026-01-18.md`.
- sprites.dev selected for sandboxing; CLI install + smoke test completed (created `my-sprite`, exec verified).
- PR opened for docs/spec updates: https://github.com/yusefmosiah/choirOS/pull/14

## Priority Order (Knockdown Plan)
1. VC-01: version control primitives (checkpoint, diff, rollback) for supervisor workspaces.
2. SBX-01: sandbox lifecycle + isolation + snapshot/restore hooks.
3. FE-01: host React frontend inside inner sandbox and wire rollback when bad code breaks UI.
4. QA-01: screenshot snapshot testing w/ “screenshot slideshow” verification artifact.
5. AUTH-03/04/05: implement passkey recovery spec + email (Resend) + optional WhatsApp/Telegram channels.
6. SEC-01: security-by-design scope for chat I/O + MCP (capabilities, audit, isolation).
7. MCP-01 / IO-01: implementation of MCP server + chat shim (low priority).

## Key References
- Issue tracker: `docs/reviews/issues-2026-01-18.md`
- Auth recovery spec: `docs/specs/CHOIR_AUTH_RECOVERY_SPEC.md`
- Storage + rollback spec: `docs/specs/CHOIR_STORAGE_ROLLBACK_SPEC.md`
- Auth API stub: `api/routers/auth.py`
- Auth store: `shared/auth.py`
- System architecture/specs: `docs/specs/CHOIR_FULL_SYSTEM_DESIGN.md`, `docs/specs/CHOIR_LOCAL_VC_GLOBAL_BOUNDARY_SPEC.md`

## Execution Notes
- Python venv: `api/venv` (activate with `source api/venv/bin/activate`).
- Set `PYTHONPATH` to repo root for supervisor modules.
- `./dev.sh` starts frontend/back/supervisor.
- Supervisor standalone: `SUPERVISOR_STANDALONE=1` and `NATS_ENABLED=0`.
- sprites.dev CLI: installed to `~/.local/bin`; create sprite and verify exec before wiring adapter.

## Suggested Next Steps (Concrete)
- VC-01: implement base+overlay checkpoint API (create/list/restore), using `CHOIR_STORAGE_ROLLBACK_SPEC.md` as the contract.
- SBX-01: add sprites.dev lifecycle hooks (create/teardown, network policy) and integrate snapshot/restore with VC-01.
- FE-01: run React frontend inside sandbox; ensure supervisor can trigger rollback and UI recovery.
- QA-01: add Playwright-based screenshot slideshow artifact generation (step-wise screenshots + manifest).
- AUTH-03+: implement spec tables + endpoints in `shared/auth.py` and `api/routers/auth.py`, begin with email channel binding and recovery flow.

## Open Questions
- Recovery approval threshold: strict 2-of-3 vs bootstrap 1-of-2 for new users?
- Cooldown durations acceptable for recovery and failed assertions?
- Do we allow email-only recovery for first-run accounts (temporary)?
